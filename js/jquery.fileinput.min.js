/**
 * --------------------------------------------------------------------
 * jQuery customfileinput plugin
 * Author: Scott Jehl, scott@filamentgroup.com
 * Copyright (c) 2009 Filament Group
 * licensed under MIT (filamentgroup.com/examples/mit-license.txt)
 * --------------------------------------------------------------------
 * Updated by seb@madebymade.co.uk, 30/05/2013
 * --------------------------------------------------------------------
 */

$.fn.customFileInput=function(h){var c={button_class:"",button_text:{no_file:"Browse",file:"Change"},input_class:"",input_text:{no_file:"No file selected..."}};var b=$.extend({},c,h);var d=$(this).addClass("customfile-input").bind({mouseover:function(){i.addClass("customfile-hover")},mouseout:function(){i.removeClass("customfile-hover")},focus:function(){i.addClass("customfile-focus");d.data("val",d.val())},blur:function(){i.removeClass("customfile-focus");$(this).trigger("checkChange")},disable:function(){d.attr("disabled",true);i.addClass("customfile-disabled")},enable:function(){d.removeAttr("disabled");i.removeClass("customfile-disabled")},checkChange:function(){if(d.val()&&d.val()!=d.data("val")){d.trigger("change")}},change:function(){var j=$(this).val();if(j!==""){f(j)}else{a()}},click:function(){d.data("val",d.val());setTimeout(function(){d.trigger("checkChange")},100)},touchend:function(){d.click()}});var i=$('<div class="customfile '+b.input_class+'"></div>');var g=$('<span class="customfile-button '+b.button_class+'" aria-hidden="true">'+b.button_text.no_file+"</span>").appendTo(i);var e=$('<span class="customfile-feedback" aria-hidden="true">'+b.input_text.no_file+"</span>").appendTo(i);var f=function(k){var l=k.split(/\\/).pop();var j="customfile-ext-"+l.split(".").pop().toLowerCase();e.text(l).removeClass(e.data("fileExt")||"").addClass(j).data("fileExt",j).addClass("customfile-feedback-populated");g.text(b.button_text.file)};var a=function(){e.text(b.input_text.no_file).removeClass(e.data("fileExt")||"").data("fileExt","").removeClass("customfile-feedback-populated");g.text(b.button_text.no_file)};if(d.is("[disabled]")){d.trigger("disable")}i.mousemove(function(j){d.css({left:(j.pageX-i.offset().left)-d.outerWidth()+20,top:(j.pageY-i.offset().top)-10})}).insertAfter(d);d.appendTo(i);return $(this)};